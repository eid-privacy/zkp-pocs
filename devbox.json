{
  "$schema": "https://raw.githubusercontent.com/jetify-com/devbox/0.12.0/.schema/devbox.schema.json",
  "packages": [
    "python@3.11",
    "github:eid-privacy/flakes#noir-versions.v1_0_0-beta_17",
    "github:eid-privacy/flakes#barretenberg-versions.v2_1_8",
    "time@latest",
    "rustup@latest",
    "cargo-nextest@latest",
    "python311Packages.pip@latest",
    "jq@latest",
    "gnumake@latest"
  ],
  "shell": {
    "init_hook": [
      ". $VENV_DIR/bin/activate",
      "pip install -r noir/requirements.txt",
      "echo Ensuring npm and python packages are installed",
      "if [ -z \"$( find $RUSTUP_HOME | grep toolchains/stable )\" ]; then rustup default stable; fi"
    ],
    "scripts": {
      "dock-all":   "cd docknetwork && make all",
      "noir-all":   "cd noir && make all",
      "noir-clean": "cd noir && make clean",
      "all":        "(cd docknetwork && make all) && (cd noir && make all)",
      "clean":      "(cd noir && make clean) && (cd docknetwork && make clean)"
    }
  },
  "env": {
    "PATH": "$PATH:$HOME/.cargo/bin"
  }
}
